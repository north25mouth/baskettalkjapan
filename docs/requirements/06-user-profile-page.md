# 要件定義書：ユーザープロフィールページ（マイページ）

**優先順位**: 1（スレッド詳細ページと並行）  
**作成日**: 2025-01-23  
**ステータス**: 実装中

## 概要

ユーザーが自分のプロフィールを表示・編集できるページ

## URL

`/community/user/[userId]`

## 機能要件

### 1. プロフィール表示

- [x] ユーザー名（表示名）
- [x] アバター画像（またはデフォルトアイコン）
- [x] 自己紹介（bio）
- [x] 登録日時
- [x] 投稿数（統計）
- [x] いいね数（統計）

### 2. プロフィール編集機能

- [ ] 表示名の編集
  - 最大50文字
  - 必須項目
- [ ] アバターの選択
  - デフォルトアイコンから選択
  - 複数のデフォルトアイコンを用意
  - アイコンはSVGまたは画像ファイル
- [ ] 自己紹介の編集
  - 最大500文字
  - 任意項目
- [ ] 保存ボタン
- [ ] キャンセルボタン

### 3. アクセス制御

- [ ] 自分のプロフィールのみ編集可能
- [ ] 他のユーザーのプロフィールは閲覧のみ
- [ ] 未ログインユーザーはログインページにリダイレクト

### 4. ナビゲーション

- [ ] コミュニティに戻るリンク
- [ ] ヘッダーからマイページへのリンク（既存）

## UI要件

### レイアウト

- ヘッダー：ユーザー名、アバター
- メインコンテンツ：プロフィール情報、編集フォーム
- レスポンシブデザイン対応

### デフォルトアイコン

- 複数のデフォルトアイコンを用意
- SVG形式で実装
- 色やデザインが異なるバリエーション
- アイコンは `public/avatars/` に配置

## データ要件

### 必要なデータ

- ユーザー情報（User）
- 投稿数（統計）
- いいね数（統計）

### API/関数

- `getUser(userId)` - ユーザー情報取得
- `updateUser(userId, userData)` - ユーザー情報更新
- `getUserPostsCount(userId)` - 投稿数取得（オプション）
- `getUserLikesCount(userId)` - いいね数取得（オプション）

## 非機能要件

### パフォーマンス

- 初期表示: < 1秒
- プロフィール更新: < 1秒

### セキュリティ

- 認証チェック（編集時）
- 自分のプロフィールのみ編集可能
- XSS対策（サニタイズ）

### エラーハンドリング

- ユーザーが存在しない場合：404ページ
- 権限がない場合：適切なエラーメッセージ
- ネットワークエラー：リトライ機能

## 実装チェックリスト

### フェーズ1: 基本表示
- [ ] プロフィール情報の表示
- [ ] アバター表示（デフォルトアイコン対応）
- [ ] ローディング状態
- [ ] エラーハンドリング

### フェーズ2: プロフィール編集
- [ ] 編集フォーム
- [ ] 表示名の編集
- [ ] アバターの選択（デフォルトアイコン）
- [ ] 自己紹介の編集
- [ ] 保存機能
- [ ] バリデーション

### フェーズ3: アクセス制御
- [ ] 自分のプロフィールのみ編集可能
- [ ] 他のユーザーのプロフィールは閲覧のみ
- [ ] 未ログインユーザーのリダイレクト

## 参考

- 要件定義書 v0.2
- データモデル（User型）



